---
layout: default
---

<div class="container">
    <!-- Main content column -->
    <div class="main-content">
        <h1>{{ page.list_title }}</h1>
        <p>{{ page.content }}</p>

        {% assign tag_array = "" | split: "" %}

        {% for tag in site.tags %}
        {% assign tag_name = tag[0] %}
        {% assign post_count = tag[1] | size %}
        {% assign tag_array = tag_array | push: tag_name | push: post_count %}
        {% endfor %}

        {% comment %} Now sort tag_array manually by post_count (every second item in the array) {% endcomment %}
        {% assign tag_pairs = "" | split: "" %}
        {% for i in (0..tag_array.size | minus:2) step:2 %}
        {% assign pair = tag_array[i] | append: "," | append: tag_array[i+1] %}
        {% assign tag_pairs = tag_pairs | push: pair %}
        {% endfor %}

        {% assign sorted_pairs = tag_pairs | sort_natural | reverse %}

        <div class="top-tags">
            <strong>Popular tags:</strong>
            <ul class="tags-list">
                {% assign count = 0 %}
                {% for pair in sorted_pairs %}
                {% assign parts = pair | split: "," %}
                {% assign tag_name = parts[0] %}
                {% assign post_count = parts[1] %}
                <li>
                    <a href="{{ '/tags/' | append: tag_name | relative_url }}">
                        {{ tag_name }} ({{ post_count }})
                    </a>
                </li>
                {% assign count = count | plus: 1 %}
                {% if count == 5 %}
                {% break %}
                {% endif %}
                {% endfor %}
                <li><a href="{{ '/tags/' | relative_url }}">View all tags</a></li>
            </ul>
        </div>

        {% assign last_date = "" %}
        {% assign featured_posts = site.posts | where:"display","featured" %}

        {% for post in site.posts %}
        {% comment %} Convert UTC â†’ BST {% endcomment %}
        {% assign post_timestamp = post.date | date: "%s" | plus: 3600 %}
        {% assign post_date = post_timestamp | date: "%d %B %Y" %}
        {% assign post_time = post_timestamp | date: "%I:%M%P" %}

        {% if post_date != last_date %}
        {% unless forloop.first %}
        <hr>{% endunless %}
        <h2>{{ post_date }}</h2>
        {% assign last_date = post_date %}
        {% endif %}

        <article>
            <h3><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>

            {% if post.content contains '<!--end-preview-->' %}
            {{ post.excerpt }}
            <a href="{{ post.url | relative_url }}">Read more</a>
            {% else %}
            {{ post.content }}
            {% endif %}

            {% if post.tags %}
            <p>Tags:
                {% for tag in post.tags %}
                <a href="{{ '/tags/' | append: tag | relative_url }}">{{ tag }}</a>{% unless forloop.last %}, {%
                endunless %}
                {% endfor %}
                &nbsp;|&nbsp; {{ post_time }}
            </p>
            {% else %}
            <p>{{ post_time }}</p>
            {% endif %}
        </article>

        <hr style="border: 0; border-top: 1px solid #ccc; margin: 1em 0;">
        {% endfor %}
    </div>

    <!-- Sidebar column -->
    <div class="sidebar">
        {% if featured_posts.size > 0 %}
        <div class="featured">
            <h3>Featured Articles</h3>
            <ul>
                {% for post in featured_posts %}
                <li><a href="{{ post.url | relative_url }}">{{ post.title }}</a></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
</div>