---
layout: default
---

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        const searchBox = document.getElementById("search-box");
        const resultsList = document.getElementById("search-results");

        // Load posts.json
        fetch("/search.json")
            .then(response => response.json())
            .then(posts => {
                // Build Lunr index
                const idx = lunr(function () {
                    this.ref("url");
                    this.field("title");
                    this.field("content");
                    this.field("tags");

                    posts.forEach(function (doc) {
                        this.add(doc);
                    }, this);
                });

                searchBox.addEventListener("input", function () {
                    const query = searchBox.value;
                    resultsList.innerHTML = "";

                    if (query.length < 2) return;

                    const results = idx.search(query);
                    results.forEach(function (result) {
                        const post = posts.find(p => p.url === result.ref);
                        const li = document.createElement("li");
                        li.innerHTML = `<a href="${post.url}">${post.title}</a>`;
                        resultsList.appendChild(li);
                    });
                });
            });
    });
</script>

<h1>{{ page.title }}</h1>
<p>{{ page.content }}</p>

{% for post in site.posts %}
<article>
    <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
    <p>{{ post.excerpt | strip_html | truncate: 500 }} <a href="{{ post.url | relative_url }}">Read more</a></p>

    {% if post.tags %}
    <p>Tags:
        {% for tag in post.tags %}
        <a href="{{ '/tags/' | append: tag | relative_url }}">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
    </p>
    {% endif %}
</article>
<hr>
{% endfor %}