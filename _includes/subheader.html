<div class="sub-header">
    <div class="wrapper">
        <div class="col-container">

            {% comment %} Create a list of tags with their post counts, sort it, and take the top 5 {% endcomment %}
            {% assign tag_counts = "" %}
            {% for tag in site.tags %}
            {% assign tag_counts = tag_counts | append: tag[1].size | append: ":" | append: tag[0] | append: "," %}
            {% endfor %}
            {% assign tag_counts = tag_counts | split: "," | sort %}
            {% assign tag_counts = tag_counts | reverse %}

            <div class="top-tags">
                <p class="hide-mobile">Top tags:</p>
                <ul>
                    {% assign count = 0 %}
                    {% for tag in tag_counts %}
                    {% assign parts = tag | split: ":" %}
                    {% assign post_count = parts[0] %}
                    {% assign tag_name = parts[1] %}
                    <li>
                        <a href="{{ '/tags/' | append: tag_name | relative_url }}">
                            {{ tag_name }} ({{ post_count }})
                        </a>
                    </li>
                    {% assign count = count | plus: 1 %}
                    {% if count == 3 %}
                    {% break %}
                    {% endif %}
                    {% endfor %}
                    <li><a href="{{ '/tags/' | relative_url }}">...</a></li>
                </ul>
            </div>

            <form action="{{ '/search/' | relative_url }}" method="get">
                <input type="text" name="q" placeholder="By tag or content" required>
                <button type="submit" class="search-button">Search</button>
            </form>
        </div><!--/col-container-->
    </div><!--/wrapper-->
</div>