<footer class="site-footer">
    <div class="wrapper">
        <p>Custom Footer</p>
    </div>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function () {
            const searchBox = document.getElementById("search-box");
            const resultsList = document.getElementById("search-results");

            // Load posts.json
            fetch("/search.json")
                .then(response => response.json())
                .then(posts => {
                    // Build Lunr index
                    const idx = lunr(function () {
                        this.ref("url");
                        this.field("title");
                        this.field("content");
                        this.field("tags");

                        posts.forEach(function (doc) {
                            this.add(doc);
                        }, this);
                    });

                    searchBox.addEventListener("input", function () {
                        const query = searchBox.value;
                        resultsList.innerHTML = "";

                        if (query.length < 2) return;

                        const results = idx.search(query);
                        results.forEach(function (result) {
                            const post = posts.find(p => p.url === result.ref);
                            const li = document.createElement("li");
                            li.innerHTML = `<a href="${post.url}">${post.title}</a>`;
                            resultsList.appendChild(li);
                        });
                    });
                });
        });
    </script>
</footer>