<header class="site-header">
    <div class="wrapper">
        <div>
            <h1 class="site-title">
                <a href="{{ '/' | relative_url }}">{{ site.title }}</a>
            </h1>
            <nav class="site-nav">
                <a href="{{ '/' | relative_url }}">Home</a>
                <a href="{{ '/about' | relative_url }}">About</a>
            </nav>
        </div>
        <form action="{{ '/search/' | relative_url }}" method="get">
            <input type="text" name="q" placeholder="Search..." required>
            <button type="submit">Search</button>
        </form>
    </div>
    {% assign tag_counts = "" %}
    {% for tag in site.tags %}
    {% assign tag_counts = tag_counts | append: tag[1].size | append: ":" | append: tag[0] | append: "," %}
    {% endfor %}
    {% assign tag_counts = tag_counts | split: "," | sort %}
    {% assign tag_counts = tag_counts | reverse %}

    <div class="top-tags">
        <strong>Popular tags:</strong>
        <ul class="tags-list">
            {% assign count = 0 %}
            {% for tag in tag_counts %}
            {% assign parts = tag | split: ":" %}
            {% assign post_count = parts[0] %}
            {% assign tag_name = parts[1] %}
            <li>
                <a href="{{ '/tags/' | append: tag_name | relative_url }}">
                    {{ tag_name }} ({{ post_count }})
                </a>
            </li>
            {% assign count = count | plus: 1 %}
            {% if count == 5 %}
            {% break %}
            {% endif %}
            {% endfor %}
            <li><a href="{{ '/tags/' | relative_url }}">View all tags</a></li>
        </ul>
    </div>
</header>